# ğŸš€ Pipeline as Code

---

## ğŸ“Œ What is Pipeline as Code?

**Pipeline as Code** means:

* We write the **entire CI-CD process as code**
* This code is written in a file called **Jenkinsfile**
* Jenkins reads this file and runs the steps automatically

ğŸ‘‰ Instead of clicking buttons in Jenkins UI, we **write instructions in code**.

---

## ğŸ§  Real-Life Analogy

ğŸ“œ **Recipe book**

* Recipe = Jenkinsfile
* Steps = CI-CD stages
* Chef = Jenkins

If recipe is written, anyone can cook the same dish again.

---

## ğŸ” What does Pipeline as Code do?

It automates **all CI-CD stages**, such as:

* Download code
* Build code
* Test code
* Deploy to QA
* Deploy to Production (after approval)

All written in **one file**.

---

## âœ… Advantages of Pipeline as Code (Simple)

---

### 1ï¸âƒ£ Stored in Git

* Jenkinsfile is code
* It is stored in **Git repository**
* Team members can review and update it
* Git keeps **history and versions**

ğŸ§  Analogy
ğŸ“‚ Google Docs with version history

---

### 2ï¸âƒ£ Survives Jenkins Restart

* Even if Jenkins restarts
* Pipeline will **not be lost**

ğŸ§  Analogy
ğŸ’¾ Saving file before power cut

---

### 3ï¸âƒ£ Fewer Plugins Needed

* Pipeline handles most logic
* Less dependency on plugins
* More **secure and faster**

ğŸ§  Analogy
ğŸ“± Fewer apps â†’ faster phone

---

### 4ï¸âƒ£ Handles Real-World Logic

Pipeline can handle:

* if / else conditions
* loops
* error handling
* approval steps

ğŸ§  Analogy
ğŸ¤– Smart machine that reacts to success or failure

---

## ğŸ›  Two Types of Pipeline as Code

---

## 1ï¸âƒ£ Scripted Pipeline

* Older style
* Written fully in Groovy
* More flexible
* Little complex for beginners

### Basic Syntax (Simple)

```groovy
node('built-in') {
  stage('Stage Name') {
    // Code for this stage
  }
}
```

ğŸ§  Analogy
ğŸš— Manual car (more control)

---

## 2ï¸âƒ£ Declarative Pipeline

* Newer style
* Structured and clean
* Easy to read
* Recommended for beginners

### Basic Syntax

```groovy
pipeline {
  agent any
  stages {
    stage('Stage Name') {
      steps {
        // Code for this stage
      }
    }
  }
}
```

ğŸ§  Analogy
ğŸš˜ Automatic car (easy to drive)

---

## ğŸ§ª Scripted Pipeline â€“ Job Creation Steps

1ï¸âƒ£ Open Jenkins Dashboard
2ï¸âƒ£ Click **New Item**
3ï¸âƒ£ Enter name: `ScriptedPipeline`
4ï¸âƒ£ Select **Pipeline**
5ï¸âƒ£ Click **OK**

---

## ğŸ§© Real Project Scripted Pipeline Example (Explained)

### ğŸ“„ Jenkinsfile (Scripted Pipeline)

```groovy
node('built-in') {

    stage('ContinuousDownload') {
        git 'https://github.com/thej950/maven.git'
    }

    stage('ContinuousBuild') {
        sh 'mvn package'
    }

    stage('ContinuousDeployment') {
        deploy adapters: [tomcat9(
            credentialsId: 'XXXX',
            url: 'http://QA-SERVER:8080'
        )], contextPath: 'testapp', war: '**/*.war'
    }

    stage('ContinuousTesting') {
        git 'https://github.com/thej950/FunctionalTesting.git'
        sh 'java -jar testing.jar'
    }

    stage('ContinuousDelivery') {
        input message: 'Need approval from DM!', submitter: 'srinivas'
        deploy adapters: [tomcat9(
            credentialsId: 'XXXX',
            url: 'http://PROD-SERVER:8080'
        )], contextPath: 'prodapp', war: '**/*.war'
    }
}
```

---

## ğŸ” What Each Stage Does (Very Simple)

---

### ğŸ”¹ Stage 1: ContinuousDownload

â¡ Downloads source code from GitHub

ğŸ§  Like taking raw materials from store

---

### ğŸ”¹ Stage 2: ContinuousBuild

â¡ Builds the code using Maven

ğŸ§  Like cooking the food

---

### ğŸ”¹ Stage 3: ContinuousDeployment (QA)

â¡ Deploys app to **QA server**

ğŸ§  Like serving food for tasting

---

### ğŸ”¹ Stage 4: ContinuousTesting

â¡ Downloads Selenium tests
â¡ Runs automated tests

ğŸ§  Like checking food quality

---

### ğŸ”¹ Stage 5: ContinuousDelivery (Production)

â¡ Deploys app to **Production server**
â¡ Requires **manager approval**

ğŸ§  Like final approval before selling product

---

## ğŸ” Why Approval is Needed for Production?

* Production is critical
* Only authorized person should approve
* Prevents mistakes

---

## ğŸ‘¤ Manager Approval Setup (Simple)

1ï¸âƒ£ Go to **Manage Jenkins**
2ï¸âƒ£ Click **Manage Users**
3ï¸âƒ£ Create user: `srinivas`
4ï¸âƒ£ Give required permissions

---

### â³ Approval Step in Pipeline

```groovy
input message: 'Waiting for approval from the DM!', submitter: 'srinivas'
```

â¡ Pipeline pauses
â¡ Manager clicks **Proceed**
â¡ Deployment continues

---

## ğŸ§  Analogy for Approval Step

ğŸ›‘ Red signal
â¡ Manager allows
â¡ Green signal â†’ continue

---

## âœ… One-Line Summary

**Pipeline as Code means writing the full CI-CD process in a Jenkinsfile so Jenkins can build, test, and deploy applications automatically, safely, and repeatedly.** ğŸš€

# Declarative 
```bash
pipeline{
    agent any
    stages{
        stage('ContinuosDowload'){
            steps{
                git 'https://github.com/thej950/maven.git'
            }
        }
        stage('ContinuosBuild'){
            steps{
                sh 'mvn package'
            }
        }
        stage('ContinuosDeployment'){
            steps{
                deploy adapters: [tomcat9(credentialsId: 'e2212b30-c9ba-4219-a177-f93f71c67c2a', path: '', url: 'http://172.31.8.237:8080')], contextPath: 'test', war: '**/*.war'
            }
        }
        stage('ContinuosTesting'){
            steps{
                git 'https://github.com/thej950/FunctionalTesting.git'
                sh 'java -jar /var/lib/jenkins/workspace/declarative-pipeline/testing.jar'
            }
        }
        stage('ContiuosDelivery'){
            steps{
                deploy adapters: [tomcat9(credentialsId: 'e2212b30-c9ba-4219-a177-f93f71c67c2a', path: '', url: 'http://172.31.2.80:8080')], contextPath: 'prod', war: '**/*.war'
            }
        }
    }
}
```